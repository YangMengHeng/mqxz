{"remainingRequest":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\lamp\\system\\role\\edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\lamp\\system\\role\\edit.vue","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1686711135008},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1686711137115}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"E:/project/lamp-web-master(finish/lamp-web-master/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport roleApi from '@/api/Role.js';\nexport default {\n  name: 'RoleEdit',\n  components: {},\n  props: {\n    dialogVisible: {\n      type: Boolean,\n      default: false\n    },\n    type: {\n      type: String,\n      default: 'add'\n    }\n  },\n  data: function data() {\n    var _this = this;\n    return {\n      role: this.initRole(),\n      screenWidth: 0,\n      width: this.initWidth(),\n      enums: {},\n      rules: {\n        name: [{\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        }, {\n          min: 1,\n          max: 255,\n          message: this.$t('rules.range4to10'),\n          trigger: 'blur'\n        }, {\n          validator: function validator(rule, value, callback) {\n            if (!_this.type === 'add' && value.trim().length > 0) {\n              roleApi.check(value).then(function (response) {\n                var res = response.data;\n                if (res.data) {\n                  callback('编码重复');\n                } else {\n                  callback();\n                }\n              });\n            } else {\n              callback();\n            }\n            callback();\n          },\n          trigger: 'blur'\n        }],\n        state: {\n          required: true,\n          message: this.$t('rules.require'),\n          trigger: 'blur'\n        }\n      }\n    };\n  },\n  computed: {\n    isVisible: {\n      get: function get() {\n        return this.dialogVisible;\n      },\n      set: function set() {\n        this.close();\n        this.reset();\n      }\n    },\n    title: function title() {\n      return this.type === 'add' ? this.$t('common.add') : this.$t('common.edit');\n    }\n  },\n  watch: {},\n  mounted: function mounted() {\n    var _this2 = this;\n    window.onresize = function () {\n      return function () {\n        _this2.width = _this2.initWidth();\n      }();\n    };\n  },\n  methods: {\n    initRole: function initRole() {\n      return {\n        id: '',\n        code: '',\n        name: '',\n        state: true,\n        describe: '',\n        category: '10'\n      };\n    },\n    initWidth: function initWidth() {\n      this.screenWidth = document.body.clientWidth;\n      if (this.screenWidth < 991) {\n        return '90%';\n      } else if (this.screenWidth < 1400) {\n        return '45%';\n      } else {\n        return '800px';\n      }\n    },\n    loadListOptions: function loadListOptions(_ref) {\n      var callback = _ref.callback;\n      callback();\n    },\n    setRole: function setRole() {\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var vm = this;\n      if (val['enums']) {\n        vm.enums = val['enums'];\n      }\n      if (val['row']) {\n        vm.role = _objectSpread({}, val['row']);\n      }\n    },\n    close: function close() {\n      this.$emit('close');\n    },\n    reset: function reset() {\n      // 先清除校验，再清除表单，不然有奇怪的bug\n      this.$refs.form.clearValidate();\n      this.$refs.form.resetFields();\n      this.role = this.initRole();\n    },\n    submitForm: function submitForm() {\n      var vm = this;\n      this.$refs.form.validate(function (valid) {\n        if (valid) {\n          vm.editSubmit();\n        } else {\n          return false;\n        }\n      });\n    },\n    editSubmit: function editSubmit() {\n      var vm = this;\n      if (vm.type === 'add') {\n        vm.save();\n      } else {\n        vm.update();\n      }\n    },\n    save: function save() {\n      var vm = this;\n      roleApi.save(this.role).then(function (response) {\n        var res = response.data;\n        if (res.isSuccess) {\n          vm.isVisible = false;\n          vm.$message({\n            message: vm.$t('tips.createSuccess'),\n            type: 'success'\n          });\n          vm.$emit('success');\n        }\n      });\n    },\n    update: function update() {\n      var _this3 = this;\n      roleApi.update(this.role).then(function (response) {\n        var res = response.data;\n        if (res.isSuccess) {\n          _this3.isVisible = false;\n          _this3.$message({\n            message: _this3.$t('tips.updateSuccess'),\n            type: 'success'\n          });\n          _this3.$emit('success');\n        }\n      });\n    }\n  }\n};",{"version":3,"names":["roleApi","name","components","props","dialogVisible","type","Boolean","default","String","data","_this","role","initRole","screenWidth","width","initWidth","enums","rules","required","message","$t","trigger","min","max","validator","rule","value","callback","trim","length","check","then","response","res","state","computed","isVisible","get","set","close","reset","title","watch","mounted","_this2","window","onresize","methods","id","code","describe","category","document","body","clientWidth","loadListOptions","_ref","setRole","val","arguments","undefined","vm","_objectSpread","$emit","$refs","form","clearValidate","resetFields","submitForm","validate","valid","editSubmit","save","update","isSuccess","$message","_this3"],"sources":["src/views/lamp/system/role/edit.vue"],"sourcesContent":["<template>\n  <el-dialog :close-on-click-modal=\"false\" :title=\"title\" :type=\"type\" :visible.sync=\"isVisible\" :width=\"width\"\n             top=\"50px\">\n    <el-form :model=\"role\" :rules=\"rules\" label-position=\"right\" label-width=\"100px\" ref=\"form\">\n      <el-form-item :label=\"$t('table.role.code')\" prop=\"code\">\n        <el-input :disabled=\"type==='edit'\" v-model=\"role.code\"/>\n      </el-form-item>\n      <el-form-item label=\"角色类别\" prop=\"category\">\n        <el-radio-group v-model=\"role.category\">\n          <el-radio-button label=\"10\">功能角色</el-radio-button>\n          <el-radio-button label=\"30\">数据角色</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item :label=\"$t('table.role.name')\" prop=\"name\">\n        <el-input v-model=\"role.name\"/>\n      </el-form-item>\n      <el-form-item :label=\"$t('table.role.state')\" prop=\"state\">\n        <el-radio-group v-model=\"role.state\">\n          <el-radio-button :label=\"true\">{{ $t('common.state.valid') }}</el-radio-button>\n          <el-radio-button :label=\"false\">{{ $t('common.state.invalid') }}</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item :label=\"$t('table.role.describe')\" prop=\"describe\">\n        <el-input v-model=\"role.describe\"/>\n      </el-form-item>\n    </el-form>\n    <div class=\"dialog-footer\" slot=\"footer\">\n      <el-button @click=\"isVisible = false\" plain type=\"warning\">{{ $t('common.cancel') }}</el-button>\n      <el-button @click=\"submitForm\" plain type=\"primary\">{{ $t('common.confirm') }}</el-button>\n    </div>\n  </el-dialog>\n</template>\n<script>\n  import roleApi from '@/api/Role.js'\n\n  export default {\n    name: 'RoleEdit',\n    components: {},\n    props: {\n      dialogVisible: {\n        type: Boolean,\n        default: false\n      },\n      type: {\n        type: String,\n        default: 'add'\n      }\n    },\n    data() {\n      return {\n        role: this.initRole(),\n        screenWidth: 0,\n        width: this.initWidth(),\n        enums: {\n        },\n        rules: {\n          name: [\n            {required: true, message: this.$t('rules.require'), trigger: 'blur'},\n            {min: 1, max: 255, message: this.$t('rules.range4to10'), trigger: 'blur'},\n            {\n              validator: (rule, value, callback) => {\n                if (!this.type === 'add' && value.trim().length > 0) {\n                  roleApi.check(value)\n                    .then((response) => {\n                      const res = response.data\n                      if (res.data) {\n                        callback('编码重复')\n                      } else {\n                        callback()\n                      }\n                    })\n                } else {\n                  callback()\n                }\n                callback()\n              }, trigger: 'blur'\n            }\n          ],\n          state: {required: true, message: this.$t('rules.require'), trigger: 'blur'},\n        }\n      }\n    },\n    computed: {\n      isVisible: {\n        get() {\n          return this.dialogVisible\n        },\n        set() {\n          this.close()\n          this.reset()\n        }\n      },\n      title() {\n        return this.type === 'add' ? this.$t('common.add') : this.$t('common.edit')\n      }\n    },\n    watch: {},\n    mounted() {\n      window.onresize = () => {\n        return (() => {\n          this.width = this.initWidth()\n        })()\n      }\n    },\n    methods: {\n      initRole() {\n        return {\n          id: '',\n          code: '',\n          name: '',\n          state: true,\n          describe: '',\n          category: '10',\n        }\n      },\n      initWidth() {\n        this.screenWidth = document.body.clientWidth\n        if (this.screenWidth < 991) {\n          return '90%'\n        } else if (this.screenWidth < 1400) {\n          return '45%'\n        } else {\n          return '800px'\n        }\n      },\n      loadListOptions({callback}) {\n        callback()\n      },\n      setRole(val = {}) {\n        const vm = this\n\n        if (val['enums']) {\n          vm.enums = val['enums'];\n        }\n\n        if (val['row']) {\n          vm.role = {...val['row']}\n        }\n      },\n      close() {\n        this.$emit('close')\n      },\n      reset() {\n        // 先清除校验，再清除表单，不然有奇怪的bug\n        this.$refs.form.clearValidate()\n        this.$refs.form.resetFields()\n        this.role = this.initRole()\n      },\n      submitForm() {\n        const vm = this\n        this.$refs.form.validate((valid) => {\n          if (valid) {\n            vm.editSubmit()\n          } else {\n            return false\n          }\n        })\n      },\n      editSubmit() {\n        const vm = this\n\n        if (vm.type === 'add') {\n          vm.save()\n        } else {\n          vm.update()\n        }\n      },\n      save() {\n        const vm = this\n        roleApi.save(this.role)\n          .then((response) => {\n            const res = response.data\n            if (res.isSuccess) {\n              vm.isVisible = false\n              vm.$message({\n                message: vm.$t('tips.createSuccess'),\n                type: 'success'\n              })\n              vm.$emit('success')\n            }\n          })\n      },\n      update() {\n        roleApi.update(this.role)\n          .then((response) => {\n            const res = response.data\n            if (res.isSuccess) {\n              this.isVisible = false\n              this.$message({\n                message: this.$t('tips.updateSuccess'),\n                type: 'success'\n              })\n              this.$emit('success')\n            }\n          })\n      },\n    }\n  }\n</script>\n<style lang=\"scss\" scoped>\n</style>\n"],"mappings":"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"}]}