{"remainingRequest":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js!E:\\project\\lamp-web1(原版)\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web1(原版)\\lamp-web-master\\src\\router\\index.js","dependencies":[{"path":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\src\\router\\index.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1686711135008},{"path":"E:\\project\\lamp-web1(原版)\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"E:/project/lamp-web1(\\u539F\\u7248)/lamp-web-master/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport Vue from 'vue';\nimport Router from 'vue-router';\nimport Layout from '@/layout';\nimport db from '@/utils/localstorage';\nimport store from '@/store/index';\nimport loginApi from '@/api/Login.js';\nimport NProgress from 'nprogress';\nimport 'nprogress/nprogress.css';\nVue.use(Router);\nvar constRouter = [{\n  path: '/redirect',\n  component: Layout,\n  hidden: true,\n  children: [{\n    path: '/redirect/:path*',\n    component: function component(resolve) {\n      return require(['@/views/redirect/index'], resolve);\n    }\n  }]\n}, {\n  path: '/404',\n  component: function component(resolve) {\n    return require(['@/views/error-page/404'], resolve);\n  },\n  hidden: true\n}, {\n  path: '/login',\n  name: '登录页',\n  component: function component(resolve) {\n    return require(['@/views/login/index'], resolve);\n  }\n}, {\n  path: '/',\n  component: Layout,\n  redirect: '/dashboard',\n  children: [{\n    path: 'dashboard',\n    component: function component(resolve) {\n      return require(['@/views/dashboard/index'], resolve);\n    },\n    name: 'Dashboard',\n    meta: {\n      title: 'dashboard',\n      icon: 'dashboard',\n      affix: true\n    }\n  }]\n}, {\n  path: '/profile',\n  component: Layout,\n  redirect: '/profile/index',\n  hidden: true,\n  children: [{\n    path: 'index',\n    component: function component(resolve) {\n      return require(['@/views/profile/index'], resolve);\n    },\n    name: 'Profile',\n    meta: {\n      title: 'profile',\n      icon: 'user',\n      noCache: true\n    }\n  }]\n}, {\n  path: '/resources',\n  component: Layout,\n  redirect: '/resources/msg',\n  hidden: true,\n  alwaysShow: true,\n  meta: {\n    title: '资源中心',\n    icon: '',\n    noCache: true,\n    breadcrumb: true\n  },\n  children: [{\n    hidden: true,\n    alwaysShow: false,\n    path: '/resources/msg/edit',\n    component: function component(resolve) {\n      return require(['@/views/lamp/resources/msg/edit'], resolve);\n    },\n    name: '发送消息',\n    meta: {\n      title: '发送消息',\n      icon: '',\n      noCache: true,\n      breadcrumb: true\n    }\n  }, {\n    hidden: true,\n    path: '/resources/sms/edit',\n    component: function component(resolve) {\n      return require(['@/views/lamp/resources/sms/edit'], resolve);\n    },\n    name: 'smsEdit',\n    meta: {\n      title: '发送短信',\n      icon: '',\n      noCache: true\n    }\n  }]\n}, {\n  path: '/error',\n  component: Layout,\n  redirect: 'noRedirect',\n  name: 'ErrorPages',\n  meta: {\n    title: 'errorPages',\n    icon: '404'\n  },\n  children: [{\n    path: '404',\n    component: function component(resolve) {\n      return require(['@/views/error-page/404'], resolve);\n    },\n    name: 'Page404',\n    meta: {\n      title: 'page404',\n      noCache: true\n    }\n  }]\n}];\nexport var router = new Router({\n  scrollBehavior: function scrollBehavior() {\n    return {\n      y: 0\n    };\n  },\n  routes: constRouter\n});\nvar whiteList = ['/login'];\n\n// 异步的路由信息， 同时，左侧菜单也会根据这个来显示\nvar asyncRouter;\n\n// 导航守卫，渲染动态路由\nrouter.beforeEach(function (to, from, next) {\n  NProgress.start();\n  if (whiteList.indexOf(to.path) !== -1) {\n    next();\n  } else {\n    var token = db.get('TOKEN', '');\n    var user = db.get('USER');\n    var userRouter = db.get('USER_ROUTER', ''); //缓存中的路由\n    if (token && token.length && user) {\n      if (!asyncRouter) {\n        if (!userRouter) {\n          loginApi.getRouter({}).then(function (response) {\n            var res = response.data;\n            asyncRouter = res.data;\n            if (!(asyncRouter && asyncRouter.length > 0)) {\n              asyncRouter = [];\n            }\n            asyncRouter.push({\n              alwaysShow: false,\n              component: \"error-page/404\",\n              hidden: false,\n              name: \"404\",\n              path: \"*\"\n            });\n            store.commit('account/setRoutes', asyncRouter);\n            go(to, next);\n          });\n        } else {\n          asyncRouter = userRouter;\n          go(to, next);\n        }\n      } else {\n        next();\n      }\n    } else {\n      if (to.path === '/login') {\n        next();\n      } else {\n        db.clear();\n        next('/login');\n      }\n    }\n  }\n});\nrouter.afterEach(function () {\n  NProgress.done();\n});\nfunction go(to, next) {\n  asyncRouter = filterAsyncRouter(asyncRouter);\n  router.addRoutes(asyncRouter);\n  next(_objectSpread(_objectSpread({}, to), {}, {\n    replace: true\n  }));\n}\nfunction filterAsyncRouter(routes, parent) {\n  return routes.filter(function (route) {\n    var component = route.component;\n    if (component) {\n      if (route.component === 'Layout') {\n        if (route.children && route.children.length > 0 && parent) {\n          route.component = function (resolve) {\n            require(['@/components/RouterWrap/RouterWrap.vue'], resolve);\n          };\n        } else {\n          route.component = Layout;\n        }\n      } else if (typeof component === 'string') {\n        route.component = view(component);\n      }\n      if (route.children && route.children.length) {\n        route.children = filterAsyncRouter(route.children, route);\n      }\n      return true;\n    }\n  });\n}\nfunction view(path) {\n  return function (resolve) {\n    require([\"@/views/\".concat(path, \".vue\")], resolve);\n  };\n}\nexport default router;",null]}