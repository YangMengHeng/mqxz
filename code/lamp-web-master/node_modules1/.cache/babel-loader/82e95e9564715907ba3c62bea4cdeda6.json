{"remainingRequest":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\dashboard\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\dashboard\\index.vue","mtime":1693320463602},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1686711135008},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1686711137115}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.string.starts-with\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport echarts from \"echarts\";\nimport { parseTime } from \"@/utils\";\nimport countTo from \"vue-count-to\";\nimport resize from \"@/components/Charts/mixins/resize\";\nimport clipboard from \"@/utils/clipboard\";\nimport { simplePie, simpleBar } from \"@/utils/chartsOption\";\nimport dashboardApi from \"@/api/Dashboard.js\";\nexport default {\n  name: \"Dashboard\",\n  components: {\n    countTo: countTo\n  },\n  filters: {\n    userAvatarFilter: function userAvatarFilter(name) {\n      return name.charAt(0);\n    }\n  },\n  mixins: [resize],\n  data: function data() {\n    return {\n      activeName: \"first\",\n      welcomeMessage: \"\",\n      todayIp: 0,\n      todayVisit: 0,\n      totalVisit: 0,\n      chart: null,\n      chartOption: simpleBar(this.$t(\"common.visitTitle\") + \"\\n\"),\n      browserCountOption: simplePie(\"访问用户浏览器\"),\n      operatingSystemCountOption: simplePie(\"访问用户操作系统\"),\n      browserCountChart: null,\n      operatingSystemCountChart: null,\n      // 技术栈数据\n      projects: [{\n        name: \"Spring全家桶\",\n        des: \"Spring Boot & SpringCloud & SpringCloudAlibaba\",\n        avatar: \"SB\"\n      }, {\n        name: \"Mybatis-Plus\",\n        des: \"Mybatis-plus：Mybatis 增强组件\",\n        avatar: \"MP\"\n      }, {\n        name: \"灰度发布\",\n        des: \"修改ribbon的负载均衡策略来实现来灰度发布与本地协同开发\",\n        avatar: \"灰\"\n      }, {\n        name: \"J2cache\",\n        des: \"二级缓存框架\",\n        avatar: \"J\"\n      }, {\n        name: \"文件存储API\",\n        des: \"封装文件接口，实现本地存储、阿里云、FastDFS存储的配置化\",\n        avatar: \"F\"\n      }, {\n        name: \"XXL-JOB\",\n        des: \"基于xxl-jobs增强的，分布式定时任务调度器\",\n        avatar: \"JOB\"\n      }, {\n        name: \"监控\",\n        des: \"集成SpringBootAdmin、Zipkin、Redis、Mysql、定时任务等监控，对系统进行全方位监控护航\",\n        avatar: \"M\"\n      }, {\n        name: \"容器技术\",\n        des: \"基于Docker虚拟化容器技术，让迁移、部署更加方便快捷\",\n        avatar: \"C\"\n      }]\n    };\n  },\n  computed: {\n    donation: function donation() {\n      return require(\"@/assets/捐赠.png\");\n    },\n    user: function user() {\n      return this.$store.state.account.user;\n    },\n    avatar: function avatar() {\n      if (!this.user[\"avatar\"]) {\n        return require(\"@/assets/avatar/default.jpg\");\n      } else {\n        if (this.user[\"avatar\"].startsWith(\"http://\") || this.user[\"avatar\"].startsWith(\"https://\")) {\n          return this.user[\"avatar\"];\n        } else {\n          return require(\"@/assets/avatar/\".concat(this.user.avatar));\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.welcomeMessage = this.welcome();\n    this.initIndexData();\n  },\n  methods: {\n    handleClipboard: function handleClipboard(text, event) {\n      clipboard(text, event);\n    },\n    // 欢迎语句\n    welcome: function welcome() {\n      var _this = this;\n      var date = new Date();\n      var hour = date.getHours();\n      var time = hour < 6 ? this.$t(\"common.goodMorning\") : hour <= 11 ? this.$t(\"common.goodMorning\") : hour <= 13 ? this.$t(\"common.goodAfternoon\") : hour <= 18 ? this.$t(\"common.goodAfternoon\") : this.$t(\"common.goodEvening\");\n      var welcomeArr = Array.from({\n        length: 10\n      }, function (v, i) {\n        return _this.$t(\"common.randomMessage.\" + i);\n      });\n      var index = Math.floor(Math.random() * welcomeArr.length);\n      return \"\".concat(time, \", \").concat(this.user.name, \", \").concat(welcomeArr[index]);\n    },\n    initIndexData: function initIndexData() {\n      var _this2 = this;\n      dashboardApi.getItem({}).then(function (response) {\n        var res = response.data;\n        var data = res.data;\n        _this2.todayIp = Number(data.todayLoginIv);\n        _this2.totalVisit = Number(data.totalLoginPv);\n        _this2.todayVisit = Number(data.todayLoginPv);\n      });\n      dashboardApi.getChart({}).then(function (response) {\n        var res = response.data;\n        var data = res.data;\n        _this2.tenDaysData(data);\n        _this2.browserCount(data.browserCount);\n        _this2.operatingSystemCount(data.operatingSystemCount);\n      });\n    },\n    tenDaysData: function tenDaysData(data) {\n      var tenVisitCount = [];\n      var dateArr = [];\n      var tenUserVisitCount = [];\n      for (var i = 9; i >= 0; i--) {\n        var time = parseTime(new Date(new Date().getTime() - 24 * 60 * 60 * 1000 * i), \"{y}-{m}-{d}\");\n        var contain = false;\n        var _iterator = _createForOfIteratorHelper(data.lastTenVisitCount),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var o = _step.value;\n            if (o.login_date === time) {\n              contain = true;\n              tenVisitCount.push(o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        if (!contain) {\n          tenVisitCount.push(0);\n        }\n        var userContain = false;\n        var _iterator2 = _createForOfIteratorHelper(data.lastTenUserVisitCount),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _o = _step2.value;\n            if (_o.login_date === time) {\n              userContain = true;\n              tenUserVisitCount.push(_o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        if (!userContain) {\n          tenUserVisitCount.push(0);\n        }\n        dateArr.push(time);\n      }\n      this.chart = echarts.init(document.getElementById(\"visit-count-chart\"));\n      this.chartOption.legend.data = [this.$t(\"common.you\"), this.$t(\"common.total\")];\n      this.chartOption.xAxis.data = dateArr;\n      this.chartOption.series.push({\n        name: this.$t(\"common.you\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 227, 150)\",\n        data: tenUserVisitCount\n      });\n      this.chartOption.series.push({\n        name: this.$t(\"common.total\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 143, 251)\",\n        data: tenVisitCount\n      });\n      this.chart.setOption(this.chartOption);\n    },\n    browserCount: function browserCount(data) {\n      if (!data) {\n        return;\n      }\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.browser || \"未知\";\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.browserCountOption.series[0].data = series_data;\n      this.browserCountOption.legend.data = legend_data;\n      this.browserCountChart = echarts.init(document.getElementById(\"browser-count-chart\"), \"westeros\");\n      this.browserCountChart.setOption(this.browserCountOption);\n    },\n    operatingSystemCount: function operatingSystemCount(data) {\n      if (!data) {\n        return;\n      }\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.operating_system || \"未知\";\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.operatingSystemCountOption.series[0].data = series_data;\n      this.operatingSystemCountOption.legend.data = legend_data;\n      this.browserCountChart = echarts.init(document.getElementById(\"operating-system-count-chart\"), \"westeros\");\n      this.browserCountChart.setOption(this.operatingSystemCountOption);\n    }\n  }\n};",{"version":3,"names":["echarts","parseTime","countTo","resize","clipboard","simplePie","simpleBar","dashboardApi","name","components","filters","userAvatarFilter","charAt","mixins","data","activeName","welcomeMessage","todayIp","todayVisit","totalVisit","chart","chartOption","$t","browserCountOption","operatingSystemCountOption","browserCountChart","operatingSystemCountChart","projects","des","avatar","computed","donation","require","user","$store","state","account","startsWith","concat","mounted","welcome","initIndexData","methods","handleClipboard","text","event","_this","date","Date","hour","getHours","time","welcomeArr","Array","from","length","v","i","index","Math","floor","random","_this2","getItem","then","response","res","Number","todayLoginIv","totalLoginPv","todayLoginPv","getChart","tenDaysData","browserCount","operatingSystemCount","tenVisitCount","dateArr","tenUserVisitCount","getTime","contain","_iterator","_createForOfIteratorHelper","lastTenVisitCount","_step","s","n","done","o","value","login_date","push","count","err","e","f","userContain","_iterator2","lastTenUserVisitCount","_step2","init","document","getElementById","legend","xAxis","series","type","barWidth","color","setOption","legend_data","series_data","forEach","item","browser","operating_system"],"sources":["src/views/dashboard/index.vue"],"sourcesContent":["<template>\n  <div class=\"main\">\n    <el-row :gutter=\"10\">\n      <el-col\n        :sm=\"24\"\n        :xs=\"24\"\n      >\n        <div class=\"app-container user-container\">\n          <el-row :gutter=\"10\">\n            <el-col\n              :sm=\"12\"\n              :xs=\"24\"\n            >\n              <div class=\"user-wrapper\">\n                <!--头像的显示  -->\n                <div class=\"user-header\">\n                  <el-avatar\n                    :size=\"60\"\n                    :src=\"avatar\"\n                    fit=\"fill\"\n                  >\n                    <el-avatar :size=\"60\">\n                      {{\n                        user.name | userAvatarFilter\n                      }}\n                    </el-avatar>\n                  </el-avatar>\n                 \n                  <span position:absolute top:0> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;你好!</span>\n\n                  <!-- 登陆情况-->\n                  <div class=\"user-login-info\">\n                    {{ $t(\"common.lastLoginTime\") }}：\n                    <span id=\"last-login-time\">{{\n                      user.lastLoginTime\n                        ? user.lastLoginTime\n                        : $t(\"common.firstLogin\")\n                    }}</span>\n                  </div>\n                </div>\n              </div>\n            </el-col>\n            <el-col\n              :sm=\"12\"\n              :xs=\"24\"\n            >\n              <div class=\"user-visits\">\n                <el-row style=\"margin-bottom: .7rem\">\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                  >\n                    {{\n                      $t(\"common.todayIp\")\n                    }}\n                  </el-col>\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                  >\n                    {{\n                      $t(\"common.todayVisit\")\n                    }}\n                  </el-col>\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                  >\n                    {{\n                      $t(\"common.TotalVisit\")\n                    }}\n                  </el-col>\n                </el-row>\n                <el-row>\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                    class=\"num\"\n                  >\n                    <el-link type=\"primary\">\n                      <countTo\n                        :duration=\"3000\"\n                        :end-val=\"todayIp\"\n                        :start-val=\"0\"\n                      />\n                    </el-link>\n                  </el-col>\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                    class=\"num\"\n                  >\n                    <el-link type=\"primary\">\n                      <countTo\n                        :duration=\"3000\"\n                        :end-val=\"todayVisit\"\n                        :start-val=\"0\"\n                      />\n                    </el-link>\n                  </el-col>\n                  <el-col\n                    :offset=\"4\"\n                    :span=\"4\"\n                    class=\"num\"\n                  >\n                    <el-link type=\"primary\">\n                      <countTo\n                        :duration=\"3000\"\n                        :end-val=\"totalVisit\"\n                        :start-val=\"0\"\n                      />\n                    </el-link>\n                  </el-col>\n                </el-row>\n              </div>\n            </el-col>\n          </el-row>\n        </div>\n      </el-col>\n\n      <el-col\n        :sm=\"12\"\n        :xs=\"24\"\n      >\n        <div class=\"app-container\">\n          <div\n            id=\"visit-count-chart\"\n            style=\"width: 100%;height: 20rem\"\n          />\n        </div>\n      </el-col>\n      <el-col\n        :sm=\"12\"\n        :xs=\"24\"\n      >\n        <div class=\"app-container project-wrapper\">\n          <el-tabs v-model=\"activeName\">\n            <el-tab-pane\n              label=\"项目介绍\"\n              name=\"first\"\n            >\n              <div class=\"basic-container\">\n                <el-card>\n                  <div class=\"el-font-size\">\n                    <span>产品名称</span>\n                    <el-divider direction=\"vertical\" />\n                    <span><el-tag>博物院</el-tag></span>\n                    </el-divider>\n                     <div></div>\n                     <div></div>\n                    <span>账号密码</span>\n                    <el-divider direction=\"vertical\" />\n                    <el-tag\n                      effect=\"plain\"\n                      style=\"cursor: pointer\"\n                      @click=\"handleClipboard('lamp_pt', $event)\"\n                    >\n                      平台管理员(lamp_pt)\n                    </el-tag>\n                    <el-divider direction=\"vertical\" />\n                    <el-tag\n                      effect=\"plain\"\n                      style=\"cursor: pointer\"\n                      type=\"success\"\n                      @click=\"handleClipboard('lamp', $event)\"\n                    >\n                      超级管理员(lamp)\n                    </el-tag>\n                    <el-divider direction=\"vertical\" />\n                    <el-tag\n                      effect=\"plain\"\n                      style=\"cursor: pointer\"\n                      type=\"info\"\n                      @click=\"handleClipboard('normal', $event)\"\n                    >\n                      普通用户(normal)\n                    </el-tag>\n     \t    <div></div>\n                    <span>获取文档</span>\n                    <el-divider direction=\"vertical\" />\n                    <span class=\"tag-group\">\n                      <el-tag\n                        style=\"cursor: pointer\"\n                        onclick=\"window.open('https://www.kancloud.cn/dromara/lamp-cloud')\"\n                      >立即试读</el-tag>\n                      <el-divider direction=\"vertical\" />\n                      <el-popover\n                        placement=\"bottom\"\n                        title=\"超级VIP\"\n                        width=\"420\"\n                        trigger=\"click\"\n                      >\n                       \n                        <img\n                          :src=\"donation\"\n                          width=\"400px\"\n                          height=\"200px\"\n                        >\n                        <el-tag\n                          slot=\"reference\"\n                          type=\"danger\"\n                          style=\"cursor: pointer\"\n                        >\n                          超级VIP\n                        </el-tag>\n                      </el-popover>\n                    </span>\n                    <el-divider content-position=\"right\">\n                      <i class=\"el-icon-star-off\" />\n                    </el-divider>\n                    <span>获取源码</span>\n                    <el-divider direction=\"vertical\" />\n                    <span class=\"tag-group\">\n                      <el-tag\n                        type=\"success\"\n                        effect=\"dark\"\n                        style=\"cursor: pointer\"\n                        onclick=\"window.open('https://gitee.com/zuihou111')\"\n                      >gitee</el-tag>\n                      <el-divider direction=\"vertical\" />\n                      <el-tag\n                        type=\"info\"\n                        effect=\"dark\"\n                        style=\"cursor: pointer\"\n                        onclick=\"window.open('https://github.com/zuihou/')\"\n                      >github</el-tag>\n                      <el-divider direction=\"vertical\" />\n                      <el-tag\n                        type=\"danger\"\n                        effect=\"dark\"\n                        style=\"cursor: pointer\"\n                        onclick=\"window.open('https://www.kancloud.cn/dromara/lamp-cloud')\"\n                      >增强商业版</el-tag>\n                    </span>\n                  </div>\n                </el-card>\n              </div>\n            </el-tab-pane>\n            <el-tab-pane\n              label=\"技术栈\"\n              name=\"second\"\n            >\n              <!--              <div class=\"project-header\">-->\n              <!--                <el-link href=\"https://www.kancloud.cn/dromara/lamp-cloud\" style=\"float: right;\" target=\"_blank\" type=\"primary\">{{ $t('common.docDetails') }}</el-link>-->\n              <!--              </div>-->\n              <table>\n                <template v-for=\"(project, index) in projects\">\n                  <tr\n                    v-if=\"index % 2 == 0\"\n                    :key=\"index\"\n                  >\n                    <td>\n                      <div class=\"project-avatar-wrapper\">\n                        <el-avatar class=\"project-avatar\">\n                          {{ projects[index].avatar }}\n                        </el-avatar>\n                      </div>\n                      <div class=\"project-detail\">\n                        <div class=\"project-name\">\n                          {{ projects[index].name }}\n                        </div>\n                        <div class=\"project-desc\">\n                          <p>{{ projects[index].des }}</p>\n                        </div>\n                      </div>\n                    </td>\n                    <td>\n                      <div class=\"project-avatar-wrapper\">\n                        <el-avatar class=\"project-avatar\">\n                          {{ projects[index + 1].avatar }}\n                        </el-avatar>\n                      </div>\n                      <div class=\"project-detail\">\n                        <div class=\"project-name\">\n                          {{ projects[index + 1].name }}\n                        </div>\n                        <div class=\"project-desc\">\n                          <p>{{ projects[index + 1].des }}</p>\n                        </div>\n                      </div>\n                    </td>\n                  </tr>\n                </template>\n              </table>\n            </el-tab-pane>\n          </el-tabs>\n        </div>\n      </el-col>\n    </el-row>\n\n    <el-row :gutter=\"10\">\n      <el-col\n        :sm=\"12\"\n        :xs=\"24\"\n      >\n        <div class=\"app-container\">\n          <div\n            id=\"browser-count-chart\"\n            style=\"width: 100%;height: 20rem\"\n          />\n        </div>\n      </el-col>\n      <el-col\n        :sm=\"12\"\n        :xs=\"24\"\n      >\n        <div class=\"app-container\">\n          <div\n            id=\"operating-system-count-chart\"\n            style=\"width: 100%;height: 20rem\"\n          />\n        </div>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n<script>\nimport echarts from \"echarts\";\nimport { parseTime } from \"@/utils\";\nimport countTo from \"vue-count-to\";\nimport resize from \"@/components/Charts/mixins/resize\";\nimport clipboard from \"@/utils/clipboard\";\nimport { simplePie, simpleBar } from \"@/utils/chartsOption\";\nimport dashboardApi from \"@/api/Dashboard.js\";\n\nexport default {\n  name: \"Dashboard\",\n  components: { countTo },\n  filters: {\n    userAvatarFilter(name) {\n      return name.charAt(0);\n    }\n  },\n  mixins: [resize],\n  data() {\n    return {\n      activeName: \"first\",\n      welcomeMessage: \"\",\n      todayIp: 0,\n      todayVisit: 0,\n      totalVisit: 0,\n      chart: null,\n      chartOption: simpleBar(this.$t(\"common.visitTitle\") + \"\\n\"),\n      browserCountOption: simplePie(\"访问用户浏览器\"),\n      operatingSystemCountOption: simplePie(\"访问用户操作系统\"),\n      browserCountChart: null,\n      operatingSystemCountChart: null,\n      // 技术栈数据\n      projects: [\n        {\n          name: \"Spring全家桶\",\n          des: \"Spring Boot & SpringCloud & SpringCloudAlibaba\",\n          avatar: \"SB\"\n        },\n        {\n          name: \"Mybatis-Plus\",\n          des: \"Mybatis-plus：Mybatis 增强组件\",\n          avatar: \"MP\"\n        },\n        {\n          name: \"灰度发布\",\n          des: \"修改ribbon的负载均衡策略来实现来灰度发布与本地协同开发\",\n          avatar: \"灰\"\n        },\n        {\n          name: \"J2cache\",\n          des: \"二级缓存框架\",\n          avatar: \"J\"\n        },\n        {\n          name: \"文件存储API\",\n          des: \"封装文件接口，实现本地存储、阿里云、FastDFS存储的配置化\",\n          avatar: \"F\"\n        },\n        {\n          name: \"XXL-JOB\",\n          des: \"基于xxl-jobs增强的，分布式定时任务调度器\",\n          avatar: \"JOB\"\n        },\n        {\n          name: \"监控\",\n          des:\n            \"集成SpringBootAdmin、Zipkin、Redis、Mysql、定时任务等监控，对系统进行全方位监控护航\",\n          avatar: \"M\"\n        },\n        {\n          name: \"容器技术\",\n          des: \"基于Docker虚拟化容器技术，让迁移、部署更加方便快捷\",\n          avatar: \"C\"\n        }\n      ]\n    };\n  },\n  computed: {\n    donation() {\n      return require(\"@/assets/捐赠.png\");\n    },\n    user() {\n      return this.$store.state.account.user;\n    },\n    avatar() {\n      if (!this.user[\"avatar\"]) {\n        return require(`@/assets/avatar/default.jpg`);\n      } else {\n        if (\n          this.user[\"avatar\"].startsWith(\"http://\") ||\n          this.user[\"avatar\"].startsWith(\"https://\")\n        ) {\n          return this.user[\"avatar\"];\n        } else {\n          return require(`@/assets/avatar/${this.user.avatar}`);\n        }\n      }\n    }\n  },\n  mounted() {\n    this.welcomeMessage = this.welcome();\n    this.initIndexData();\n  },\n  methods: {\n    handleClipboard(text, event) {\n      clipboard(text, event);\n    },\n    // 欢迎语句\n    welcome() {\n      const date = new Date();\n      const hour = date.getHours();\n      const time =\n        hour < 6\n          ? this.$t(\"common.goodMorning\")\n          : hour <= 11\n          ? this.$t(\"common.goodMorning\")\n          : hour <= 13\n          ? this.$t(\"common.goodAfternoon\")\n          : hour <= 18\n          ? this.$t(\"common.goodAfternoon\")\n          : this.$t(\"common.goodEvening\");\n\n      const welcomeArr = Array.from({ length: 10 }, (v, i) =>\n        this.$t(\"common.randomMessage.\" + i)\n      );\n      const index = Math.floor(Math.random() * welcomeArr.length);\n      return `${time}, ${this.user.name}, ${welcomeArr[index]}`;\n    },\n    initIndexData: function() {\n      dashboardApi.getItem({}).then(response => {\n        const res = response.data;\n        const data = res.data;\n\n        this.todayIp = Number(data.todayLoginIv);\n        this.totalVisit = Number(data.totalLoginPv);\n        this.todayVisit = Number(data.todayLoginPv);\n      });\n\n      dashboardApi.getChart({}).then(response => {\n        const res = response.data;\n        const data = res.data;\n\n        this.tenDaysData(data);\n        this.browserCount(data.browserCount);\n        this.operatingSystemCount(data.operatingSystemCount);\n      });\n    },\n    tenDaysData(data) {\n      const tenVisitCount = [];\n      const dateArr = [];\n      const tenUserVisitCount = [];\n\n      for (let i = 9; i >= 0; i--) {\n        const time = parseTime(\n          new Date(new Date().getTime() - 24 * 60 * 60 * 1000 * i),\n          \"{y}-{m}-{d}\"\n        );\n        let contain = false;\n        for (const o of data.lastTenVisitCount) {\n          if (o.login_date === time) {\n            contain = true;\n            tenVisitCount.push(o.count);\n            break;\n          }\n        }\n        if (!contain) {\n          tenVisitCount.push(0);\n        }\n\n        let userContain = false;\n        for (const o of data.lastTenUserVisitCount) {\n          if (o.login_date === time) {\n            userContain = true;\n            tenUserVisitCount.push(o.count);\n            break;\n          }\n        }\n        if (!userContain) {\n          tenUserVisitCount.push(0);\n        }\n        dateArr.push(time);\n      }\n\n      this.chart = echarts.init(document.getElementById(\"visit-count-chart\"));\n      this.chartOption.legend.data = [\n        this.$t(\"common.you\"),\n        this.$t(\"common.total\")\n      ];\n      this.chartOption.xAxis.data = dateArr;\n      this.chartOption.series.push({\n        name: this.$t(\"common.you\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 227, 150)\",\n        data: tenUserVisitCount\n      });\n      this.chartOption.series.push({\n        name: this.$t(\"common.total\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 143, 251)\",\n        data: tenVisitCount\n      });\n      this.chart.setOption(this.chartOption);\n    },\n    browserCount(data) {\n      if (!data) {\n        return;\n      }\n      const legend_data = [];\n      const series_data = [];\n      data.forEach(item => {\n        const browser = item.browser || \"未知\";\n        series_data.push({ value: item.count, name: browser });\n        legend_data.push(browser);\n      });\n\n      this.browserCountOption.series[0].data = series_data;\n      this.browserCountOption.legend.data = legend_data;\n\n      this.browserCountChart = echarts.init(\n        document.getElementById(\"browser-count-chart\"),\n        \"westeros\"\n      );\n      this.browserCountChart.setOption(this.browserCountOption);\n    },\n    operatingSystemCount(data) {\n      if (!data) {\n        return;\n      }\n      const legend_data = [];\n      const series_data = [];\n      data.forEach(item => {\n        const browser = item.operating_system || \"未知\";\n        series_data.push({ value: item.count, name: browser });\n        legend_data.push(browser);\n      });\n\n      this.operatingSystemCountOption.series[0].data = series_data;\n      this.operatingSystemCountOption.legend.data = legend_data;\n\n      this.browserCountChart = echarts.init(\n        document.getElementById(\"operating-system-count-chart\"),\n        \"westeros\"\n      );\n      this.browserCountChart.setOption(this.operatingSystemCountOption);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n.main {\n  padding: 10px;\n\n  .app-container {\n    margin: 0 0 10px 0;\n  }\n\n  .user-container {\n    padding: 15px;\n  }\n\n  .user-wrapper {\n    width: 100%;\n    display: inline-block;\n\n    .user-header {\n      display: inline-block;\n      vertical-align: middle;\n    }\n\n    .user-info {\n      display: inline-block;\n      vertical-align: middle;\n      margin-left: 20px;\n\n      .random-message {\n        font-size: 1rem;\n        margin-bottom: 0.5rem;\n      }\n\n      .user-dept,\n      .user-login-info {\n        color: rgba(0, 0, 0, 0.45);\n        margin-bottom: 0.5rem;\n        font-size: 0.8rem;\n        line-height: 1.1rem;\n      }\n    }\n  }\n\n  .user-visits {\n    text-align: center;\n    padding-right: 2rem;\n    margin-top: 1rem;\n    vertical-align: middle;\n\n    .num {\n      font-weight: 600;\n    }\n  }\n\n  .project-wrapper {\n    padding: 0px 10px;\n\n    .project-header {\n      padding: 18px;\n      margin-bottom: 16px;\n    }\n\n    table {\n      width: 100%;\n      border-collapse: collapse;\n\n      td {\n        width: 50%;\n        border-top: 1px solid #f1f1f1;\n        border-bottom: 1px solid #f1f1f1;\n        padding: 0.6rem;\n\n        .project-avatar-wrapper {\n          display: inline-block;\n          float: left;\n          margin-right: 0.7rem;\n\n          .project-avatar {\n            color: #42b983;\n            background-color: #d6f8b8;\n          }\n        }\n\n        &:nth-child(odd) {\n          border-right: 1px solid #f1f1f1;\n        }\n      }\n    }\n\n    .project-detail {\n      display: inline-block;\n      float: left;\n      text-align: left;\n      width: 75%;\n\n      .project-name {\n        font-size: 0.9rem;\n        margin-top: -2px;\n        font-weight: 600;\n      }\n\n      .project-desc {\n        color: rgba(0, 0, 0, 0.45);\n\n        p {\n          margin: 5px 0 0 0;\n          font-size: 0.7rem;\n          line-height: 1.3rem;\n          white-space: normal;\n        }\n      }\n    }\n  }\n\n  @media screen and (max-width: 1366px) {\n    .user-info {\n      max-width: 25rem;\n    }\n  }\n  @media screen and (max-width: 1300px) {\n    .user-info {\n      max-width: 19rem;\n    }\n  }\n\n  @media screen and (max-width: 1120px) {\n    .user-info {\n      max-width: 17rem;\n    }\n  }\n}\n\n.el-font-size {\n  font-size: 14px;\n}\n\n.basic-container {\n  padding: 10px 6px;\n  border-radius: 10px;\n  box-sizing: border-box;\n\n  .el-card {\n    width: 100%;\n  }\n\n  &:first-child {\n    padding-top: 0;\n  }\n}\n\n.el-card.is-always-shadow {\n  -webkit-box-shadow: none;\n  box-shadow: none;\n  border: none !important;\n}\n</style>\n"],"mappings":"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"}]}