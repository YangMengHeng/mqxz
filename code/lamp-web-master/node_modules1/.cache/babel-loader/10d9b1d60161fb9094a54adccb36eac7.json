{"remainingRequest":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\profile\\components\\UserCard.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\src\\views\\profile\\components\\UserCard.vue","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master(finish\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1686711137115}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/project/lamp-web-master(finish/lamp-web-master/node_modules/@babel/runtime/helpers/interopRequireDefault.js\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nrequire(\"core-js/modules/es6.function.name\");\nrequire(\"core-js/modules/web.dom.iterable\");\nrequire(\"core-js/modules/es6.string.starts-with\");\nvar _PanThumb = _interopRequireDefault(require(\"@/components/PanThumb\"));\nvar _Avatar = _interopRequireDefault(require(\"./Avatar\"));\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default2 = {\n  components: {\n    PanThumb: _PanThumb.default,\n    Avatar: _Avatar.default\n  },\n  props: {\n    user: {\n      type: Object,\n      default: function _default() {\n        return {};\n      }\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      socialLoginUrl: \"\".concat(process.env.VUE_APP_BASE_API, \"/authority/social/login\"),\n      logo: [{\n        img: 'gitee.png',\n        name: 'gitee',\n        bind: false,\n        radius: true\n      }, {\n        img: 'github.png',\n        name: 'github',\n        bind: false,\n        radius: true\n      }, {\n        img: 'tencent_cloud.png',\n        name: 'tencent_cloud',\n        bind: false,\n        radius: true\n      }, {\n        img: 'qq.png',\n        name: 'qq',\n        bind: false,\n        radius: false\n      }, {\n        img: 'dingtalk.png',\n        name: 'dingtalk',\n        bind: false,\n        radius: true\n      }, {\n        img: 'microsoft.png',\n        name: 'microsoft',\n        bind: false,\n        radius: false\n      }],\n      oauthType: '',\n      page: {\n        width: window.screen.width * 0.5,\n        height: window.screen.height * 0.5\n      }\n    };\n  },\n  computed: {\n    avatar: function avatar() {\n      if (!this.user[\"avatar\"]) {\n        return require(\"@/assets/avatar/default.jpg\");\n      } else {\n        if (this.user[\"avatar\"].startsWith('http://') || this.user[\"avatar\"].startsWith('https://')) {\n          return this.user[\"avatar\"];\n        } else {\n          return require(\"@/assets/avatar/\".concat(this.user.avatar));\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    // this.findUserConnections()\n  },\n  destroyed: function destroyed() {\n    window.removeEventListener('message', this.resolveBindResult);\n  },\n  methods: {\n    openAvatar: function openAvatar() {\n      this.dialogVisible = true;\n      this.$refs.myAvatar.init();\n    },\n    changeSuccess: function changeSuccess(avatar) {\n      this.dialogVisible = false;\n      this.$message({\n        message: this.$t('tips.updateSuccess'),\n        type: 'success'\n      });\n      this.user.avatar = avatar;\n      this.$store.commit('account/setUser', this.user);\n    },\n    resolveLogo: function resolveLogo(logo) {\n      return require(\"@/assets/logo/\".concat(logo));\n    },\n    findUserConnections: function findUserConnections() {\n      var _this = this;\n      this.$get(\"auth/social/connections/\".concat(this.user.username)).then(function (r) {\n        var data = r.data.data;\n        data.forEach(function (d) {\n          _this.logo.forEach(function (l) {\n            if (l.name === d.providerName.toLowerCase()) {\n              l.bind = true;\n            }\n          });\n        });\n      });\n    },\n    bind: function bind(name) {\n      this.$message({\n        message: '待完善',\n        type: 'warning'\n      });\n      console.log(name);\n      this.oauthType = name;\n      // const url = `${this.socialLoginUrl}/${name}/bind`\n      // window.open(url, 'newWindow', `height=${this.page.height}, width=${this.page.width}, top=10%, left=10%, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no`)\n      // window.addEventListener('message', this.resolveBindResult, false)\n    },\n    resolveBindResult: function resolveBindResult(e) {\n      var data = e.data.data;\n      data.token = null;\n      // this.$post('auth/social/bind', {\n      //   ...data,\n      //   bindUsername: this.user.username\n      // }).then((r) => {\n      //   this.logo.forEach(l => {\n      //     if (l.name === this.oauthType) {\n      //       l.bind = true\n      //     }\n      //   })\n      //   this.$message({\n      //     message: this.$t('common.bindSuccess'),\n      //     type: 'success'\n      //   })\n      // })\n    },\n    unbind: function unbind(name) {\n      var _this2 = this;\n      this.$confirm(this.$t('common.confirmUnbind'), this.$t('common.tips'), {\n        confirmButtonText: this.$t('common.confirm'),\n        cancelButtonText: this.$t('common.cancel'),\n        type: 'warning'\n      }).then(function () {\n        _this2.$delete('auth/social/unbind', {\n          bindUsername: _this2.user.username,\n          oauthType: name\n        }).then(function () {\n          _this2.logo.forEach(function (l) {\n            if (l.name === name) {\n              l.bind = false;\n            }\n          });\n          _this2.$message({\n            message: _this2.$t('common.unbindSuccess'),\n            type: 'success'\n          });\n        });\n      }).catch(function () {});\n    }\n  }\n};\nexports.default = _default2;",{"version":3,"names":["_PanThumb","_interopRequireDefault","require","_Avatar","components","PanThumb","Avatar","props","user","type","Object","default","_default","data","dialogVisible","socialLoginUrl","concat","process","env","VUE_APP_BASE_API","logo","img","name","bind","radius","oauthType","page","width","window","screen","height","computed","avatar","startsWith","mounted","destroyed","removeEventListener","resolveBindResult","methods","openAvatar","$refs","myAvatar","init","changeSuccess","$message","message","$t","$store","commit","resolveLogo","findUserConnections","_this","$get","username","then","r","forEach","d","l","providerName","toLowerCase","console","log","e","token","unbind","_this2","$confirm","confirmButtonText","cancelButtonText","$delete","bindUsername","catch","exports","_default2"],"sources":["src/views/profile/components/UserCard.vue"],"sourcesContent":["<template>\n  <el-card style=\"margin-bottom:20px;\">\n    <div class=\"clearfix\" slot=\"header\">\n      <span>{{ $t('common.aboutMe') }}</span>\n    </div>\n    <div class=\"user-profile\">\n      <div class=\"box-center\">\n        <pan-thumb :height=\"'100px'\" :hoverable=\"false\" :image=\"avatar\" :width=\"'100px'\">\n          <el-link @click=\"openAvatar\" class=\"change-avatar\" type=\"primary\">{{ $t('common.changeAvatar') }}</el-link>\n        </pan-thumb>\n      </div>\n      <div class=\"box-center\">\n        <div class=\"user-name text-center\">{{ user.name }}</div>\n        <div class=\"user-role text-center text-muted\">\n          <span>{{ user.email ? user.email : $t('common.noEmail') }}</span> ·\n          <span>{{ user.mobile ? user.mobile : $t('common.noMobile') }}</span>\n        </div>\n      </div>\n    </div>\n    <div class=\"user-bio\">\n      <div class=\"user-education user-bio-section\">\n        <div class=\"user-bio-section-header\">\n          <el-icon class=\"el-icon-tickets\" />\n          <span>{{ $t('table.user.workDescribe') }}</span>\n        </div>\n        <div class=\"user-bio-section-body\">\n          <div class=\"text-muted\">{{ user.workDescribe ? user.workDescribe: $t('tips.nothing') }}</div>\n        </div>\n      </div>\n      <div class=\"user-education user-bio-section\">\n        <div class=\"user-bio-section-header\">\n          <el-icon class=\"el-icon-connection\" />\n          <span>{{ $t('table.user.social') }}</span>\n        </div>\n        <div class=\"user-bio-section-body\">\n          <div class=\"text-muted\">\n            <template v-for=\"(l, index) in logo\">\n              <div :key=\"index\" class=\"logo-wrapper\">\n                <img :class=\"{ 'radius': l.radius }\" :src=\"resolveLogo(l.img)\" :title=\"$t('common.unbind')\" @click=\"unbind(l.name)\" alt v-if=\"l.bind\" />\n                <img :class=\"{ 'radius': l.radius }\" :src=\"resolveLogo(l.img)\" :title=\"$t('common.bind')\" @click=\"bind(l.name)\" alt class=\"unbind\" v-else />\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n    </div>\n    <avatar :dialog-visible=\"dialogVisible\" @close=\"dialogVisible = false\" @success=\"changeSuccess\" ref=\"myAvatar\" />\n  </el-card>\n</template>\n\n<script>\nimport PanThumb from '@/components/PanThumb'\nimport Avatar from './Avatar'\n\nexport default {\n  components: { PanThumb, Avatar },\n  props: {\n    user: {\n      type: Object,\n      default: () => {\n        return {\n        }\n      }\n    }\n  },\n  data () {\n    return {\n      dialogVisible: false,\n      socialLoginUrl: `${process.env.VUE_APP_BASE_API}/authority/social/login`,\n      logo: [\n        { img: 'gitee.png', name: 'gitee', bind: false, radius: true },\n        { img: 'github.png', name: 'github', bind: false, radius: true },\n        { img: 'tencent_cloud.png', name: 'tencent_cloud', bind: false, radius: true },\n        { img: 'qq.png', name: 'qq', bind: false, radius: false },\n        { img: 'dingtalk.png', name: 'dingtalk', bind: false, radius: true },\n        { img: 'microsoft.png', name: 'microsoft', bind: false, radius: false }\n      ],\n      oauthType: '',\n      page: {\n        width: window.screen.width * 0.5,\n        height: window.screen.height * 0.5\n      }\n    }\n  },\n  computed: {\n    avatar () {\n      if (!this.user[\"avatar\"]) {\n        return require(`@/assets/avatar/default.jpg`)\n      } else {\n        if (this.user[\"avatar\"].startsWith('http://') || this.user[\"avatar\"].startsWith('https://')) {\n          return this.user[\"avatar\"]\n        } else {\n          return require(`@/assets/avatar/${this.user.avatar}`)\n        }\n      }\n    }\n  },\n  mounted () {\n    // this.findUserConnections()\n  },\n  destroyed () {\n    window.removeEventListener('message', this.resolveBindResult)\n  },\n  methods: {\n    openAvatar () {\n      this.dialogVisible = true\n      this.$refs.myAvatar.init()\n    },\n    changeSuccess (avatar) {\n      this.dialogVisible = false\n      this.$message({\n        message: this.$t('tips.updateSuccess'),\n        type: 'success'\n      })\n      this.user.avatar = avatar\n      this.$store.commit('account/setUser', this.user)\n    },\n    resolveLogo (logo) {\n      return require(`@/assets/logo/${logo}`)\n    },\n    findUserConnections () {\n      this.$get(`auth/social/connections/${this.user.username}`).then((r) => {\n        const data = r.data.data\n        data.forEach(d => {\n          this.logo.forEach(l => {\n            if (l.name === d.providerName.toLowerCase()) {\n              l.bind = true\n            }\n          })\n        })\n      })\n    },\n    bind (name) {\n      this.$message({\n        message: '待完善',\n        type: 'warning'\n      })\n      console.log(name)\n      this.oauthType = name\n      // const url = `${this.socialLoginUrl}/${name}/bind`\n      // window.open(url, 'newWindow', `height=${this.page.height}, width=${this.page.width}, top=10%, left=10%, toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no`)\n      // window.addEventListener('message', this.resolveBindResult, false)\n    },\n    resolveBindResult (e) {\n      const data = e.data.data\n      data.token = null\n      // this.$post('auth/social/bind', {\n      //   ...data,\n      //   bindUsername: this.user.username\n      // }).then((r) => {\n      //   this.logo.forEach(l => {\n      //     if (l.name === this.oauthType) {\n      //       l.bind = true\n      //     }\n      //   })\n      //   this.$message({\n      //     message: this.$t('common.bindSuccess'),\n      //     type: 'success'\n      //   })\n      // })\n    },\n    unbind (name) {\n      this.$confirm(this.$t('common.confirmUnbind'), this.$t('common.tips'), {\n        confirmButtonText: this.$t('common.confirm'),\n        cancelButtonText: this.$t('common.cancel'),\n        type: 'warning'\n      }).then(() => {\n        this.$delete('auth/social/unbind', {\n          bindUsername: this.user.username,\n          oauthType: name\n        }).then(() => {\n          this.logo.forEach(l => {\n            if (l.name === name) {\n              l.bind = false\n            }\n          })\n          this.$message({\n            message: this.$t('common.unbindSuccess'),\n            type: 'success'\n          })\n        })\n      }).catch(() => { })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.box-center {\n  margin: 0 auto;\n  display: table;\n}\n\n.text-muted {\n  color: #777;\n}\n\n.user-profile {\n  .user-name {\n    font-weight: bold;\n  }\n\n  .box-center {\n    padding-top: 10px;\n  }\n\n  .user-role {\n    padding-top: 10px;\n    font-weight: 400;\n    font-size: 14px;\n  }\n\n  .box-social {\n    padding-top: 30px;\n\n    .el-table {\n      border-top: 1px solid #dfe6ec;\n    }\n  }\n\n  .user-follow {\n    padding-top: 20px;\n  }\n}\n\n.user-bio {\n  margin-top: 20px;\n  color: #606266;\n\n  span {\n    padding-left: 4px;\n  }\n  .logo-wrapper {\n    display: inline-block;\n    margin: 10px 0;\n    img {\n      width: 1.4rem;\n      display: inline-block;\n      margin: 0 0.6rem;\n      cursor: pointer;\n      &.unbind {\n        -webkit-filter: grayscale(100%);\n        -moz-filter: grayscale(100%);\n        -o-filter: grayscale(100%);\n        filter: grayscale(100%);\n      }\n      &.radius {\n        border-radius: 50%;\n      }\n    }\n  }\n  .user-bio-section {\n    font-size: 14px;\n    padding: 15px 0;\n\n    .user-bio-section-header {\n      border-bottom: 1px solid #dfe6ec;\n      padding-bottom: 10px;\n      margin-bottom: 10px;\n      font-weight: bold;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;;;;;;AAmDA,IAAAA,SAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAEA;EACAE,UAAA;IAAAC,QAAA,EAAAA,iBAAA;IAAAC,MAAA,EAAAA;EAAA;EACAC,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAC,SAAA;QACA,QACA;MACA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,aAAA;MACAC,cAAA,KAAAC,MAAA,CAAAC,OAAA,CAAAC,GAAA,CAAAC,gBAAA;MACAC,IAAA,GACA;QAAAC,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,GACA;QAAAH,GAAA;QAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;MAAA,EACA;MACAC,SAAA;MACAC,IAAA;QACAC,KAAA,EAAAC,MAAA,CAAAC,MAAA,CAAAF,KAAA;QACAG,MAAA,EAAAF,MAAA,CAAAC,MAAA,CAAAC,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACAC,MAAA,WAAAA,OAAA;MACA,UAAAxB,IAAA;QACA,OAAAN,OAAA;MACA;QACA,SAAAM,IAAA,WAAAyB,UAAA,oBAAAzB,IAAA,WAAAyB,UAAA;UACA,YAAAzB,IAAA;QACA;UACA,OAAAN,OAAA,oBAAAc,MAAA,MAAAR,IAAA,CAAAwB,MAAA;QACA;MACA;IACA;EACA;EACAE,OAAA,WAAAA,QAAA;IACA;EAAA,CACA;EACAC,SAAA,WAAAA,UAAA;IACAP,MAAA,CAAAQ,mBAAA,iBAAAC,iBAAA;EACA;EACAC,OAAA;IACAC,UAAA,WAAAA,WAAA;MACA,KAAAzB,aAAA;MACA,KAAA0B,KAAA,CAAAC,QAAA,CAAAC,IAAA;IACA;IACAC,aAAA,WAAAA,cAAAX,MAAA;MACA,KAAAlB,aAAA;MACA,KAAA8B,QAAA;QACAC,OAAA,OAAAC,EAAA;QACArC,IAAA;MACA;MACA,KAAAD,IAAA,CAAAwB,MAAA,GAAAA,MAAA;MACA,KAAAe,MAAA,CAAAC,MAAA,yBAAAxC,IAAA;IACA;IACAyC,WAAA,WAAAA,YAAA7B,IAAA;MACA,OAAAlB,OAAA,kBAAAc,MAAA,CAAAI,IAAA;IACA;IACA8B,mBAAA,WAAAA,oBAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,IAAA,4BAAApC,MAAA,MAAAR,IAAA,CAAA6C,QAAA,GAAAC,IAAA,WAAAC,CAAA;QACA,IAAA1C,IAAA,GAAA0C,CAAA,CAAA1C,IAAA,CAAAA,IAAA;QACAA,IAAA,CAAA2C,OAAA,WAAAC,CAAA;UACAN,KAAA,CAAA/B,IAAA,CAAAoC,OAAA,WAAAE,CAAA;YACA,IAAAA,CAAA,CAAApC,IAAA,KAAAmC,CAAA,CAAAE,YAAA,CAAAC,WAAA;cACAF,CAAA,CAAAnC,IAAA;YACA;UACA;QACA;MACA;IACA;IACAA,IAAA,WAAAA,KAAAD,IAAA;MACA,KAAAsB,QAAA;QACAC,OAAA;QACApC,IAAA;MACA;MACAoD,OAAA,CAAAC,GAAA,CAAAxC,IAAA;MACA,KAAAG,SAAA,GAAAH,IAAA;MACA;MACA;MACA;IACA;IACAe,iBAAA,WAAAA,kBAAA0B,CAAA;MACA,IAAAlD,IAAA,GAAAkD,CAAA,CAAAlD,IAAA,CAAAA,IAAA;MACAA,IAAA,CAAAmD,KAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;IACAC,MAAA,WAAAA,OAAA3C,IAAA;MAAA,IAAA4C,MAAA;MACA,KAAAC,QAAA,MAAArB,EAAA,+BAAAA,EAAA;QACAsB,iBAAA,OAAAtB,EAAA;QACAuB,gBAAA,OAAAvB,EAAA;QACArC,IAAA;MACA,GAAA6C,IAAA;QACAY,MAAA,CAAAI,OAAA;UACAC,YAAA,EAAAL,MAAA,CAAA1D,IAAA,CAAA6C,QAAA;UACA5B,SAAA,EAAAH;QACA,GAAAgC,IAAA;UACAY,MAAA,CAAA9C,IAAA,CAAAoC,OAAA,WAAAE,CAAA;YACA,IAAAA,CAAA,CAAApC,IAAA,KAAAA,IAAA;cACAoC,CAAA,CAAAnC,IAAA;YACA;UACA;UACA2C,MAAA,CAAAtB,QAAA;YACAC,OAAA,EAAAqB,MAAA,CAAApB,EAAA;YACArC,IAAA;UACA;QACA;MACA,GAAA+D,KAAA;IACA;EACA;AACA;AAAAC,OAAA,CAAA9D,OAAA,GAAA+D,SAAA"}]}