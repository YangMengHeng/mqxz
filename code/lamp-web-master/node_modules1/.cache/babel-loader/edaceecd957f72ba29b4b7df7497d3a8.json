{"remainingRequest":"E:\\project\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js!E:\\project\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\lamp-web-master\\src\\views\\dashboard\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\lamp-web-master\\src\\views\\dashboard\\index.vue","mtime":1689064321243},{"path":"E:\\project\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1686711135008},{"path":"E:\\project\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609},{"path":"E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1686711137115}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.string.starts-with\";\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport echarts from \"echarts\";\nimport { parseTime } from \"@/utils\";\nimport countTo from \"vue-count-to\";\nimport resize from \"@/components/Charts/mixins/resize\";\nimport clipboard from \"@/utils/clipboard\";\nimport { simplePie, simpleBar } from \"@/utils/chartsOption\";\nimport dashboardApi from \"@/api/Dashboard.js\";\nexport default {\n  name: \"Dashboard\",\n  components: {\n    countTo: countTo\n  },\n  filters: {\n    userAvatarFilter: function userAvatarFilter(name) {\n      return name.charAt(0);\n    }\n  },\n  mixins: [resize],\n  data: function data() {\n    return {\n      activeName: \"first\",\n      welcomeMessage: \"\",\n      todayIp: 0,\n      todayVisit: 0,\n      totalVisit: 0,\n      chart: null,\n      chartOption: simpleBar(this.$t(\"common.visitTitle\") + \"\\n\"),\n      browserCountOption: simplePie(\"访问用户浏览器\"),\n      operatingSystemCountOption: simplePie(\"访问用户操作系统\"),\n      browserCountChart: null,\n      operatingSystemCountChart: null,\n      // 技术栈数据\n      projects: [{\n        name: \"Spring全家桶\",\n        des: \"Spring Boot & SpringCloud & SpringCloudAlibaba\",\n        avatar: \"SB\"\n      }, {\n        name: \"Mybatis-Plus\",\n        des: \"Mybatis-plus：Mybatis 增强组件\",\n        avatar: \"MP\"\n      }, {\n        name: \"灰度发布\",\n        des: \"修改ribbon的负载均衡策略来实现来灰度发布与本地协同开发\",\n        avatar: \"灰\"\n      }, {\n        name: \"J2cache\",\n        des: \"二级缓存框架\",\n        avatar: \"J\"\n      }, {\n        name: \"文件存储API\",\n        des: \"封装文件接口，实现本地存储、阿里云、FastDFS存储的配置化\",\n        avatar: \"F\"\n      }, {\n        name: \"XXL-JOB\",\n        des: \"基于xxl-jobs增强的，分布式定时任务调度器\",\n        avatar: \"JOB\"\n      }, {\n        name: \"监控\",\n        des: \"集成SpringBootAdmin、Zipkin、Redis、Mysql、定时任务等监控，对系统进行全方位监控护航\",\n        avatar: \"M\"\n      }, {\n        name: \"容器技术\",\n        des: \"基于Docker虚拟化容器技术，让迁移、部署更加方便快捷\",\n        avatar: \"C\"\n      }]\n    };\n  },\n  computed: {\n    donation: function donation() {\n      return require(\"@/assets/捐赠.png\");\n    },\n    user: function user() {\n      return this.$store.state.account.user;\n    },\n    avatar: function avatar() {\n      if (!this.user[\"avatar\"]) {\n        return require(\"@/assets/avatar/default.jpg\");\n      } else {\n        if (this.user[\"avatar\"].startsWith(\"http://\") || this.user[\"avatar\"].startsWith(\"https://\")) {\n          return this.user[\"avatar\"];\n        } else {\n          return require(\"@/assets/avatar/\".concat(this.user.avatar));\n        }\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.welcomeMessage = this.welcome();\n    this.initIndexData();\n  },\n  methods: {\n    handleClipboard: function handleClipboard(text, event) {\n      clipboard(text, event);\n    },\n    // 欢迎语句\n    welcome: function welcome() {\n      var _this = this;\n      var date = new Date();\n      var hour = date.getHours();\n      var time = hour < 6 ? this.$t(\"common.goodMorning\") : hour <= 11 ? this.$t(\"common.goodMorning\") : hour <= 13 ? this.$t(\"common.goodAfternoon\") : hour <= 18 ? this.$t(\"common.goodAfternoon\") : this.$t(\"common.goodEvening\");\n      var welcomeArr = Array.from({\n        length: 10\n      }, function (v, i) {\n        return _this.$t(\"common.randomMessage.\" + i);\n      });\n      var index = Math.floor(Math.random() * welcomeArr.length);\n      return \"\".concat(time, \", \").concat(this.user.name, \", \").concat(welcomeArr[index]);\n    },\n    initIndexData: function initIndexData() {\n      var _this2 = this;\n      dashboardApi.getItem({}).then(function (response) {\n        var res = response.data;\n        var data = res.data;\n        _this2.todayIp = Number(data.todayLoginIv);\n        _this2.totalVisit = Number(data.totalLoginPv);\n        _this2.todayVisit = Number(data.todayLoginPv);\n      });\n      dashboardApi.getChart({}).then(function (response) {\n        var res = response.data;\n        var data = res.data;\n        _this2.tenDaysData(data);\n        _this2.browserCount(data.browserCount);\n        _this2.operatingSystemCount(data.operatingSystemCount);\n      });\n    },\n    tenDaysData: function tenDaysData(data) {\n      var tenVisitCount = [];\n      var dateArr = [];\n      var tenUserVisitCount = [];\n      for (var i = 9; i >= 0; i--) {\n        var time = parseTime(new Date(new Date().getTime() - 24 * 60 * 60 * 1000 * i), \"{y}-{m}-{d}\");\n        var contain = false;\n        var _iterator = _createForOfIteratorHelper(data.lastTenVisitCount),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var o = _step.value;\n            if (o.login_date === time) {\n              contain = true;\n              tenVisitCount.push(o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n        if (!contain) {\n          tenVisitCount.push(0);\n        }\n        var userContain = false;\n        var _iterator2 = _createForOfIteratorHelper(data.lastTenUserVisitCount),\n          _step2;\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var _o = _step2.value;\n            if (_o.login_date === time) {\n              userContain = true;\n              tenUserVisitCount.push(_o.count);\n              break;\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n        if (!userContain) {\n          tenUserVisitCount.push(0);\n        }\n        dateArr.push(time);\n      }\n      this.chart = echarts.init(document.getElementById(\"visit-count-chart\"));\n      this.chartOption.legend.data = [this.$t(\"common.you\"), this.$t(\"common.total\")];\n      this.chartOption.xAxis.data = dateArr;\n      this.chartOption.series.push({\n        name: this.$t(\"common.you\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 227, 150)\",\n        data: tenUserVisitCount\n      });\n      this.chartOption.series.push({\n        name: this.$t(\"common.total\"),\n        type: \"bar\",\n        barWidth: \"25%\",\n        color: \"rgb(0, 143, 251)\",\n        data: tenVisitCount\n      });\n      this.chart.setOption(this.chartOption);\n    },\n    browserCount: function browserCount(data) {\n      if (!data) {\n        return;\n      }\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.browser || \"未知\";\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.browserCountOption.series[0].data = series_data;\n      this.browserCountOption.legend.data = legend_data;\n      this.browserCountChart = echarts.init(document.getElementById(\"browser-count-chart\"), \"westeros\");\n      this.browserCountChart.setOption(this.browserCountOption);\n    },\n    operatingSystemCount: function operatingSystemCount(data) {\n      if (!data) {\n        return;\n      }\n      var legend_data = [];\n      var series_data = [];\n      data.forEach(function (item) {\n        var browser = item.operating_system || \"未知\";\n        series_data.push({\n          value: item.count,\n          name: browser\n        });\n        legend_data.push(browser);\n      });\n      this.operatingSystemCountOption.series[0].data = series_data;\n      this.operatingSystemCountOption.legend.data = legend_data;\n      this.browserCountChart = echarts.init(document.getElementById(\"operating-system-count-chart\"), \"westeros\");\n      this.browserCountChart.setOption(this.operatingSystemCountOption);\n    }\n  }\n};",null]}