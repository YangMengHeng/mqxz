{"remainingRequest":"E:\\project\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js!E:\\project\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js!E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project\\lamp-web-master\\src\\components\\lamp\\fileUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project\\lamp-web-master\\src\\components\\lamp\\fileUpload.vue","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master\\babel.config.js","mtime":1679380940000},{"path":"E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1686711135008},{"path":"E:\\project\\lamp-web-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1686711137609},{"path":"E:\\project\\lamp-web-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686711136315},{"path":"E:\\project\\lamp-web-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1686711137115}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"E:/project/lamp-web-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport db from \"@/utils/localstorage\";\nimport commonApi from \"@/api/Common.js\";\nimport { copy } from '@/utils/utils';\nimport { Base64 } from 'js-base64';\nexport default {\n  name: \"FileUpload\",\n  props: {\n    uploadRef: {\n      type: String,\n      default: \"file1\"\n    },\n    // 是否多选\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    // 是否自动上传\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    // 是否上传文件\n    isUpload: {\n      type: Boolean,\n      default: true\n    },\n    // 最大允许上传个数\n    limit: {\n      type: Number,\n      default: null\n    },\n    // 允许上传的文件类型\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    action: {\n      type: String,\n      default: \"\".concat(process.env.VUE_APP_BASE_API, \"/file/file/anyone/upload\")\n    },\n    // 允许上传的文件大小 单位：字节\n    acceptSize: {\n      type: Number,\n      default: null\n    },\n    // 默认额外上传数据\n    fileOtherData: {\n      type: Object,\n      default: function _default() {\n        return {\n          id: null,\n          bizId: \"\",\n          bizType: \"\",\n          isSingle: false\n        };\n      }\n    }\n  },\n  data: function data() {\n    return {\n      // 默认附件列表\n      fileList: [],\n      // 删除附件列表\n      removeFileAry: [],\n      // 新增附件列表\n      addFileAry: [],\n      // 上传成功的文件数\n      successNum: 0,\n      // 上传失败的文件数\n      errorNum: 0,\n      // 已上传的文件数\n      uploadTotalNum: 0,\n      // 是否上传失败\n      isUploadError: false\n      // action: `${process.env.VUE_APP_BASE_API}/file/file/anyone/upload`\n    };\n  },\n\n  computed: {\n    headers: function headers() {\n      return {\n        token: 'Bearer ' + db.get(\"TOKEN\", \"\"),\n        tenant: db.get(\"TENANT\", \"\") || \"\",\n        Authorization: \"Basic \".concat(Base64.encode(\"\".concat(process.env.VUE_APP_CLIENT_ID, \":\").concat(process.env.VUE_APP_CLIENT_SECRET)))\n      };\n    }\n  },\n  methods: {\n    // 附件初始化\n    init: function init(_ref) {\n      var id = _ref.id,\n        bizId = _ref.bizId,\n        bizType = _ref.bizType,\n        isSingle = _ref.isSingle,\n        isDetail = _ref.isDetail;\n      var vm = this;\n      vm.fileOtherData.bizId = bizId;\n      vm.fileOtherData.id = id || \"\";\n      vm.fileOtherData.bizType = bizType;\n      vm.fileOtherData.isSingle = isSingle || false;\n      vm.fileList.length = 0;\n      vm.removeFileAry = [];\n      vm.addFileAry = [];\n      vm.$emit(\"fileLengthVaild\", 0);\n      if (isDetail) {\n        vm.getAttachment();\n      }\n      vm.successNum = 0;\n      vm.errorNum = 0;\n      vm.uploadTotalNum = 0;\n      vm.$refs[vm.uploadRef].clearFiles();\n    },\n    handleChange: function handleChange(file, fileList) {\n      var vm = this;\n      if (file.response) {\n        vm.uploadTotalNum += 1;\n        if (file.response.isSuccess) {\n          vm.fileOtherData.bizId = file.response.data.bizId;\n          vm.successNum += 1;\n        } else {\n          setTimeout(function () {\n            vm.$message({\n              message: file.name + \"上传失败，原因：<br/>\" + file.response.msg,\n              type: \"error\",\n              dangerouslyUseHTMLString: true,\n              showClose: true,\n              duration: 10000,\n              onClose: function onClose(msg) {\n                copy(msg['message']);\n                vm.$message({\n                  message: \"复制错误消息成功\",\n                  type: \"success\"\n                });\n              }\n            });\n          }, 0);\n          vm.isUploadError = false;\n          vm.errorNum += 1;\n        }\n        vm.$emit(\"setId\", vm.uploadTotalNum === fileList.length && vm.errorNum <= 0, file.response);\n      } else {\n        if (vm.acceptSize) {\n          var isLtAcceptSize = file.size > vm.acceptSize;\n          if (isLtAcceptSize) {\n            setTimeout(function () {\n              vm.$message.error(\"只能上传\" + vm.renderSize(vm.acceptSize) + \"的文件!已为您过滤文件：\" + file.name);\n            }, 10);\n            fileList.forEach(function (item, index) {\n              if (item.uid === file.uid) {\n                fileList.splice(index, 1);\n              }\n            });\n          } else {\n            if (!vm.isUploadError) {\n              vm.addFileAry.push(file.name);\n            }\n            vm.isUploadError = false;\n          }\n        } else {\n          if (!vm.isUploadError) {\n            vm.addFileAry.push(file.name);\n          }\n          vm.isUploadError = false;\n        }\n        vm.$emit(\"fileLengthVaild\", vm.fileList.length + vm.addFileAry.length);\n      }\n      vm.$store.state.hasLoading = false;\n    },\n    // 附件上传失败\n    handleError: function handleError() {\n      var vm = this;\n      vm.$message.error(\"附件上传失败，请重试\");\n      vm.isUploadError = true;\n      vm.$store.state.hasLoading = false;\n    },\n    renderSize: function renderSize(value) {\n      if (null == value || value == \"\") {\n        return \"0 B\";\n      }\n      var unitArr = new Array(\"B\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\");\n      var index = 0;\n      var srcsize = parseFloat(value);\n      index = Math.floor(Math.log(srcsize) / Math.log(1024));\n      var size = srcsize / Math.pow(1024, index);\n      size = size.toFixed(2);\n      if (unitArr[index]) {\n        return size + unitArr[index];\n      }\n      return \"文件太大\";\n    },\n    handlePreview: function handlePreview(file) {\n      if (file.bizId) {\n        this.downLoadFile(file);\n      }\n    },\n    beforeRemove: function beforeRemove(file) {\n      return this.$confirm(\"确定移除\" + file.name, \"删除确认\");\n    },\n    // 文件超出个数限制时的钩子\n    handleExceed: function handleExceed() {\n      var vm = this;\n      vm.$message(\"当前最多允许上传\" + vm.limit + \"个文件\");\n    },\n    // 删除附件列表\n    handleRemove: function handleRemove(file) {\n      var vm = this;\n      if (file.bizId) {\n        vm.removeFileAry.push(file.id);\n        vm.fileList.map(function (item, index) {\n          if (item.name === file.name) {\n            vm.fileList.splice(index, 1);\n            return false;\n          }\n        });\n      } else {\n        vm.addFileAry.map(function (item, index) {\n          if (item === file.name) {\n            vm.addFileAry.splice(index, 1);\n            return false;\n          }\n        });\n      }\n      vm.$emit(\"fileLengthVaild\", vm.fileList.length + vm.addFileAry.length);\n    },\n    // 服务器删除附件\n    deleteAttachment: function () {\n      var _deleteAttachment = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var vm, res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              vm = this;\n              _context.next = 3;\n              return commonApi.deleteAttachment(vm.removeFileAry);\n            case 3:\n              res = _context.sent;\n              if (res.status === 200) {\n                if (res.data.code !== 0) {\n                  vm.$message(res.data.msg);\n                } else {\n                  vm.removeFileAry = [];\n                }\n              }\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function deleteAttachment() {\n        return _deleteAttachment.apply(this, arguments);\n      }\n      return deleteAttachment;\n    }(),\n    // 查询附件\n    getAttachment: function () {\n      var _getAttachment = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var vm, res, data;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              vm = this;\n              _context2.next = 3;\n              return commonApi.getAttachment({\n                bizIds: vm.fileOtherData.bizId,\n                bizTypes: vm.fileOtherData.bizType\n              });\n            case 3:\n              res = _context2.sent;\n              if (res.status === 200) {\n                if (res.data.code === 0) {\n                  if (res.data.data.length > 0) {\n                    data = res.data.data[0].list;\n                    data.map(function (item) {\n                      item.name = item.submittedFileName;\n                    });\n                    vm.fileList = data;\n                    vm.$emit(\"fileLengthVaild\", vm.fileList.length);\n                  }\n                }\n              }\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function getAttachment() {\n        return _getAttachment.apply(this, arguments);\n      }\n      return getAttachment;\n    }(),\n    // 查询附件\n    getAttachmentByArr: function () {\n      var _getAttachmentByArr = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(bizIds, bizTypes) {\n        var vm, res, data;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              vm = this;\n              _context3.next = 3;\n              return commonApi.getAttachment({\n                bizIds: bizIds,\n                bizTypes: bizTypes\n              });\n            case 3:\n              res = _context3.sent;\n              if (res.status === 200) {\n                if (res.data.code === 0) {\n                  if (res.data.data.length > 0) {\n                    data = res.data.data[0].list;\n                    data.map(function (item) {\n                      item.name = item.submittedFileName;\n                    });\n                    vm.fileList = data;\n                  }\n                }\n              }\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function getAttachmentByArr(_x, _x2) {\n        return _getAttachmentByArr.apply(this, arguments);\n      }\n      return getAttachmentByArr;\n    }(),\n    // 返回附件新增及删除数组长度\n    handleBack: function handleBack() {\n      var vm = this;\n      return {\n        addLength: vm.addFileAry.length,\n        removeLength: vm.removeFileAry.length\n      };\n    },\n    // 附件上传服务器触发方法\n    submitFile: function submitFile(id, bizId, bizType, name) {\n      var vm = this;\n      vm.fileOtherData.id = id;\n      if (bizId) {\n        vm.fileOtherData.bizId = bizId;\n        vm.isUpload = true;\n      }\n      vm.fileOtherData.bizType = bizType;\n      if (name) {\n        vm.fileOtherData.name = name;\n      }\n      vm.$refs[vm.uploadRef].submit();\n      vm.addFileAry = [];\n    },\n    // 附件下载\n    downLoadFile: function () {\n      var _downLoadFile = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(data) {\n        var link;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              link = document.createElement(\"a\");\n              link.href = data.url;\n              link.download = data.name;\n              link.click();\n              window.URL.revokeObjectURL(link.href);\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4);\n      }));\n      function downLoadFile(_x3) {\n        return _downLoadFile.apply(this, arguments);\n      }\n      return downLoadFile;\n    }()\n  }\n};",{"version":3,"names":["db","commonApi","copy","Base64","name","props","uploadRef","type","String","default","multiple","Boolean","autoUpload","isUpload","limit","Number","accept","action","concat","process","env","VUE_APP_BASE_API","acceptSize","fileOtherData","Object","_default","id","bizId","bizType","isSingle","data","fileList","removeFileAry","addFileAry","successNum","errorNum","uploadTotalNum","isUploadError","computed","headers","token","get","tenant","Authorization","encode","VUE_APP_CLIENT_ID","VUE_APP_CLIENT_SECRET","methods","init","_ref","isDetail","vm","length","$emit","getAttachment","$refs","clearFiles","handleChange","file","response","isSuccess","setTimeout","$message","message","msg","dangerouslyUseHTMLString","showClose","duration","onClose","isLtAcceptSize","size","error","renderSize","forEach","item","index","uid","splice","push","$store","state","hasLoading","handleError","value","unitArr","Array","srcsize","parseFloat","Math","floor","log","pow","toFixed","handlePreview","downLoadFile","beforeRemove","$confirm","handleExceed","handleRemove","map","deleteAttachment","_deleteAttachment","_asyncToGenerator","regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","sent","status","code","stop","apply","arguments","_getAttachment","_callee2","_callee2$","_context2","bizIds","bizTypes","list","submittedFileName","getAttachmentByArr","_getAttachmentByArr","_callee3","_callee3$","_context3","_x","_x2","handleBack","addLength","removeLength","submitFile","submit","_downLoadFile","_callee4","link","_callee4$","_context4","document","createElement","href","url","download","click","window","URL","revokeObjectURL","_x3"],"sources":["src/components/lamp/fileUpload.vue"],"sourcesContent":["<template>\n  <div>\n    <el-upload\n      :accept=\"accept\"\n      :action=\"action\"\n      :auto-upload=\"autoUpload\"\n      :before-remove=\"beforeRemove\"\n      :class=\"isUpload === false ? 'hidebtn' : ''\"\n      :data=\"fileOtherData\"\n      :file-list=\"fileList\"\n      :headers=\"headers\"\n      :limit=\"limit\"\n      :multiple=\"multiple\"\n      :on-change=\"handleChange\"\n      :on-error=\"handleError\"\n      :on-exceed=\"handleExceed\"\n      :on-preview=\"handlePreview\"\n      :on-remove=\"handleRemove\"\n      :ref=\"uploadRef\"\n      class=\"upload-demo\"\n    >\n      <el-button size=\"small\" type=\"primary\" v-if=\"isUpload\"\n        >点击上传</el-button\n      >\n    </el-upload>\n  </div>\n</template>\n\n<script>\nimport db from \"@/utils/localstorage\";\nimport commonApi from \"@/api/Common.js\";\nimport { copy } from '@/utils/utils'\nimport {Base64} from 'js-base64';\n\nexport default {\n  name: \"FileUpload\",\n  props: {\n    uploadRef: {\n      type: String,\n      default: \"file1\"\n    },\n    // 是否多选\n    multiple: {\n      type: Boolean,\n      default: true\n    },\n    // 是否自动上传\n    autoUpload: {\n      type: Boolean,\n      default: true\n    },\n    // 是否上传文件\n    isUpload: {\n      type: Boolean,\n      default: true\n    },\n    // 最大允许上传个数\n    limit: {\n      type: Number,\n      default: null\n    },\n    // 允许上传的文件类型\n    accept: {\n      type: String,\n      default: \"\"\n    },\n    action: {\n      type: String,\n      default: `${process.env.VUE_APP_BASE_API}/file/file/anyone/upload`\n    },\n    // 允许上传的文件大小 单位：字节\n    acceptSize: {\n      type: Number,\n      default: null\n    },\n    // 默认额外上传数据\n    fileOtherData: {\n      type: Object,\n      default: function() {\n        return {\n          id: null,\n          bizId: \"\",\n          bizType: \"\",\n          isSingle: false\n        };\n      }\n    }\n  },\n  data() {\n    return {\n      // 默认附件列表\n      fileList: [],\n      // 删除附件列表\n      removeFileAry: [],\n      // 新增附件列表\n      addFileAry: [],\n      // 上传成功的文件数\n      successNum: 0,\n      // 上传失败的文件数\n      errorNum: 0,\n      // 已上传的文件数\n      uploadTotalNum: 0,\n      // 是否上传失败\n      isUploadError: false,\n      // action: `${process.env.VUE_APP_BASE_API}/file/file/anyone/upload`\n    };\n  },\n  computed: {\n    headers() {\n      return {\n        token: 'Bearer ' + db.get(\"TOKEN\", \"\"),\n        tenant: db.get(\"TENANT\", \"\") || \"\",\n        Authorization: `Basic ${Base64.encode(`${process.env.VUE_APP_CLIENT_ID}:${process.env.VUE_APP_CLIENT_SECRET}`)}`\n      };\n    }\n  },\n  methods: {\n    // 附件初始化\n    init({ id, bizId, bizType, isSingle, isDetail }) {\n      const vm = this;\n      vm.fileOtherData.bizId = bizId;\n      vm.fileOtherData.id = id || \"\";\n      vm.fileOtherData.bizType = bizType;\n      vm.fileOtherData.isSingle = isSingle || false;\n      vm.fileList.length = 0;\n      vm.removeFileAry = [];\n      vm.addFileAry = [];\n      vm.$emit(\"fileLengthVaild\", 0);\n      if (isDetail) {\n        vm.getAttachment();\n      }\n      vm.successNum = 0;\n      vm.errorNum = 0;\n      vm.uploadTotalNum = 0;\n      vm.$refs[vm.uploadRef].clearFiles();\n    },\n\n    handleChange(file, fileList) {\n      const vm = this;\n      if (file.response) {\n        vm.uploadTotalNum += 1;\n        if (file.response.isSuccess) {\n          vm.fileOtherData.bizId = file.response.data.bizId;\n          vm.successNum += 1;\n        } else {\n          setTimeout(() => {\n            vm.$message({\n              message: file.name + \"上传失败，原因：<br/>\" + file.response.msg,\n              type: \"error\",\n              dangerouslyUseHTMLString: true,\n              showClose: true,\n              duration: 10000,\n              onClose: (msg)=>{\n                copy(msg['message']);\n                vm.$message({\n                  message: \"复制错误消息成功\",\n                  type: \"success\",\n                });\n              }\n            });\n          }, 0);\n          vm.isUploadError = false;\n          vm.errorNum += 1;\n        }\n        vm.$emit(\"setId\", vm.uploadTotalNum === fileList.length && vm.errorNum <= 0, file.response);\n      } else {\n        if (vm.acceptSize) {\n          const isLtAcceptSize = file.size > vm.acceptSize;\n\n          if (isLtAcceptSize) {\n            setTimeout(() => {\n              vm.$message.error(\n                \"只能上传\" +\n                  vm.renderSize(vm.acceptSize) +\n                  \"的文件!已为您过滤文件：\" +\n                  file.name\n              );\n            }, 10);\n\n            fileList.forEach((item, index) => {\n              if (item.uid === file.uid) {\n                fileList.splice(index, 1);\n              }\n            });\n          } else {\n            if (!vm.isUploadError) {\n              vm.addFileAry.push(file.name);\n            }\n            vm.isUploadError = false;\n          }\n        } else {\n          if (!vm.isUploadError) {\n            vm.addFileAry.push(file.name);\n          }\n          vm.isUploadError = false;\n        }\n        vm.$emit(\"fileLengthVaild\", vm.fileList.length + vm.addFileAry.length);\n      }\n      vm.$store.state.hasLoading = false;\n    },\n    // 附件上传失败\n    handleError() {\n      const vm = this;\n      vm.$message.error(\"附件上传失败，请重试\");\n      vm.isUploadError = true;\n      vm.$store.state.hasLoading = false;\n    },\n    renderSize(value) {\n      if (null == value || value == \"\") {\n        return \"0 B\";\n      }\n      const unitArr = new Array(\n        \"B\",\n        \"KB\",\n        \"MB\",\n        \"GB\",\n        \"TB\",\n        \"PB\",\n        \"EB\",\n        \"ZB\",\n        \"YB\"\n      );\n      let index = 0;\n      let srcsize = parseFloat(value);\n      index = Math.floor(Math.log(srcsize) / Math.log(1024));\n      let size = srcsize / Math.pow(1024, index);\n      size = size.toFixed(2);\n      if (unitArr[index]) {\n        return size + unitArr[index];\n      }\n      return \"文件太大\";\n    },\n    handlePreview(file) {\n      if (file.bizId) {\n        this.downLoadFile(file);\n      }\n    },\n    beforeRemove(file) {\n      return this.$confirm(\"确定移除\" + file.name, \"删除确认\");\n    },\n    // 文件超出个数限制时的钩子\n    handleExceed() {\n      const vm = this;\n      vm.$message(\"当前最多允许上传\" + vm.limit + \"个文件\");\n    },\n    // 删除附件列表\n    handleRemove(file) {\n      const vm = this;\n      if (file.bizId) {\n        vm.removeFileAry.push(file.id);\n        vm.fileList.map((item, index) => {\n          if (item.name === file.name) {\n            vm.fileList.splice(index, 1);\n            return false;\n          }\n        });\n      } else {\n        vm.addFileAry.map((item, index) => {\n          if (item === file.name) {\n            vm.addFileAry.splice(index, 1);\n            return false;\n          }\n        });\n      }\n      vm.$emit(\"fileLengthVaild\", vm.fileList.length + vm.addFileAry.length);\n    },\n    // 服务器删除附件\n    async deleteAttachment() {\n      const vm = this;\n      const res = await commonApi.deleteAttachment(vm.removeFileAry);\n      if (res.status === 200) {\n        if (res.data.code !== 0) {\n          vm.$message(res.data.msg);\n        } else {\n          vm.removeFileAry = [];\n        }\n      }\n    },\n    // 查询附件\n    async getAttachment() {\n      const vm = this;\n      const res = await commonApi.getAttachment({\n        bizIds: vm.fileOtherData.bizId,\n        bizTypes: vm.fileOtherData.bizType\n      });\n      if (res.status === 200) {\n        if (res.data.code === 0) {\n          if (res.data.data.length > 0) {\n            let data = res.data.data[0].list;\n            data.map(item => {\n              item.name = item.submittedFileName;\n            });\n            vm.fileList = data;\n            vm.$emit(\"fileLengthVaild\", vm.fileList.length);\n          }\n        }\n      }\n    },\n    // 查询附件\n    async getAttachmentByArr(bizIds, bizTypes) {\n      const vm = this;\n      const res = await commonApi.getAttachment({\n        bizIds: bizIds,\n        bizTypes: bizTypes\n      });\n      if (res.status === 200) {\n        if (res.data.code === 0) {\n          if (res.data.data.length > 0) {\n            let data = res.data.data[0].list;\n            data.map(item => {\n              item.name = item.submittedFileName;\n            });\n            vm.fileList = data;\n          }\n        }\n      }\n    },\n    // 返回附件新增及删除数组长度\n    handleBack() {\n      const vm = this;\n      return {\n        addLength: vm.addFileAry.length,\n        removeLength: vm.removeFileAry.length\n      };\n    },\n    // 附件上传服务器触发方法\n    submitFile(id, bizId, bizType, name) {\n      const vm = this;\n      vm.fileOtherData.id = id;\n      if (bizId) {\n        vm.fileOtherData.bizId = bizId;\n        vm.isUpload = true;\n      }\n      vm.fileOtherData.bizType = bizType;\n      if (name) {\n        vm.fileOtherData.name = name\n      }\n      vm.$refs[vm.uploadRef].submit();\n      vm.addFileAry = [];\n    },\n    // 附件下载\n    async downLoadFile(data) {\n      let link = document.createElement(\"a\");\n      link.href = data.url;\n      link.download = data.name;\n      link.click();\n      window.URL.revokeObjectURL(link.href);\n    }\n  }\n};\n</script>\n<style>\n.hidebtn .el-upload {\n  display: none;\n}\n</style>\n"],"mappings":"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"}]}